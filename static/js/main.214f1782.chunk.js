(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],{16:function(t,e,n){},17:function(t,e,n){"use strict";n.r(e);var i=n(1),a=n.n(i),r=n(9),s=n.n(r),o=n(2),h=n(3),c=n(6),l=n(5),u=n(0),d=function(t){Object(c.a)(n,t);var e=Object(l.a)(n);function n(t){var i;return Object(o.a)(this,n),(i=e.call(this,t)).colorClasses=i.props.colorClasses,i}return Object(h.a)(n,[{key:"makeGrid",value:function(t){for(var e=[],n=0;n<t.length;n++){for(var i=[],a=0;a<t[0].length;a++){var r=this.colorClasses[t[n][a]];i.push(Object(u.jsx)("td",{className:r},"col"+n+a))}e.push(Object(u.jsx)("tr",{children:i},"row"+n))}return Object(u.jsx)("table",{className:this.props.className,children:Object(u.jsx)("tbody",{children:e})})}},{key:"render",value:function(){return this.makeGrid(this.props.grid)}}]),n}(a.a.Component),v=n(10),p=n(4),f=function(){function t(e,n){Object(o.a)(this,t),this.coords=e,this.color=n}return Object(h.a)(t,[{key:"makeIndices",value:function(t,e,n){return 0===n?this.makeRotationOne(t,e):1===n?this.makeRotationTwo(t,e):2===n?this.makeRotationThree(t,e):3==n?this.makeRotationFour(t,e):void 0}},{key:"makeRotationOne",value:function(t,e){return this.coords.map((function(n){return[t+n[0],e+n[1]]}))}},{key:"makeRotationTwo",value:function(t,e){return this.coords.map((function(n){return[t+n[1],e+n[0]]}))}},{key:"makeRotationThree",value:function(t,e){return this.coords.map((function(n){return[t-n[0],e-n[1]]}))}},{key:"makeRotationFour",value:function(t,e){return this.coords.map((function(n){return[t-n[1],e-n[0]]}))}}]),t}(),m=new f([[0,-1],[0,0],[0,1],[0,2]],1),k=new f([[0,1],[0,0],[0,-1],[-1,0]],2),y=new f([[1,0],[0,0],[0,-1],[-1,-1]],3),j=new f([[1,-1],[0,-1],[0,0],[-1,0]],3),g=new f([[1,0],[0,0],[-1,0],[-1,-1]],4),S=new f([[-1,0],[0,0],[1,0],[1,-1]],4),b=new f([[0,-1],[0,0],[1,-1],[1,0]],5),O=function(t){Object(c.a)(n,t);var e=Object(l.a)(n);function n(t){var i;return Object(o.a)(this,n),(i=e.call(this,t)).gridWidth=10,i.gridHeight=20,i.fallingSpeed=500,i.allShapes=[m,k,y,j,g,S,b],i.state={staticGrid:i.makeEmptyGrid(i.gridHeight,i.gridWidth),shape:i.getRandomShape(),centerX:4,centerY:1,rotation:0,points:0},i}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.dropShape=setInterval(this.moveShapeDown.bind(this),this.fallingSpeed),window.addEventListener("keydown",this.handleUserInput.bind(this))}},{key:"componentWillUnmount",value:function(){clearInterval(this.dropShape),console.log("unmount")}},{key:"handleUserInput",value:function(t){37===t.keyCode?this.moveShapeLeft():38===t.keyCode?this.rotate():39===t.keyCode?this.moveShapeRight():40===t.keyCode&&this.moveShapeDown()}},{key:"moveShapeLeft",value:function(){var t=this.state.centerX-1,e=this.state.centerY,n=this.state.rotation;this.collides(t,e,n)||this.setState({centerX:t})}},{key:"moveShapeRight",value:function(){var t=this.state.centerX+1,e=this.state.centerY,n=this.state.rotation;this.collides(t,e,n)||this.setState({centerX:t})}},{key:"rotate",value:function(){var t=this.state.centerX,e=this.state.centerY,n=this.state.rotation;if(n>=3)var i=0;else i=n+1;this.collides(t,e,i)||this.setState({rotation:i})}},{key:"moveShapeDown",value:function(){var t=this.state.centerX,e=(this.state.centerY,this.state.centerY+1),n=this.state.rotation;this.collides(t,e,n)?this.resetShape():this.setState({centerY:e})}},{key:"collides",value:function(t,e,n){var i,a=this.state.staticGrid,r=this.state.shape.makeIndices(t,e,n),s=Object(p.a)(r);try{for(s.s();!(i=s.n()).done;){var o=i.value;if(o[0]<0||o[0]>=this.gridWidth||o[1]>=this.gridHeight)return!0;if(0!=a[o[1]][o[0]])return!0}}catch(h){s.e(h)}finally{s.f()}return!1}},{key:"resetShape",value:function(){n=this.joinShapeGrid();var t=this.removeFilledRows(n),e=Object(v.a)(t,2),n=e[0],i=e[1],a=this.getRandomShape(),r=this.state.points;this.setState({staticGrid:n,shape:a,centerX:4,centerY:1,rotation:0,points:r+i})}},{key:"removeFilledRows",value:function(t){var e=this.getFilledRows(t);e.sort((function(t,e){return e-t}));var n,i=0,a=Object(p.a)(e);try{for(a.s();!(n=a.n()).done;){var r=n.value;t.splice(r+i,1),t.splice(0,0,[0,0,0,0,0,0,0,0,0,0]),i+=1}}catch(s){a.e(s)}finally{a.f()}return[t,e.length]}},{key:"getFilledRows",value:function(t){for(var e=[],n=0;n<t.length;n++)this.isFilledRow(t[n])&&e.push(n);return e}},{key:"isFilledRow",value:function(t){var e,n=Object(p.a)(t);try{for(n.s();!(e=n.n()).done;){if(0===e.value)return!1}}catch(i){n.e(i)}finally{n.f()}return!0}},{key:"makeEmptyGrid",value:function(t,e){for(var n=[],i=0;i<t;i++){n.push([]);for(var a=0;a<e;a++)n[i].push(0)}return n}},{key:"joinShapeGrid",value:function(){for(var t=this.getCurrentShapeIndices(),e=this.makeEmptyGrid(this.gridHeight,this.gridWidth),n=0;n<this.state.staticGrid.length;n++)for(var i=0;i<this.state.staticGrid[0].length;i++)e[n][i]=this.state.staticGrid[n][i];var a,r=Object(p.a)(t);try{for(r.s();!(a=r.n()).done;){var s=a.value;e[s[1]][s[0]]=this.state.shape.color}}catch(o){r.e(o)}finally{r.f()}return e}},{key:"getShapeIndices",value:function(t,e,n){return this.state.shape.makeIndices(t,e,n)}},{key:"getCurrentShapeIndices",value:function(){var t=this.state.centerX,e=this.state.centerY,n=this.state.rotation;return this.getShapeIndices(t,e,n)}},{key:"getRandomShape",value:function(){var t=Math.floor(Math.random()*this.allShapes.length);return this.allShapes[t]}},{key:"render",value:function(){var t=this.joinShapeGrid();return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(d,{className:"tetris",grid:t,colorClasses:["colorZero","colorOne","colorTwo","colorThree","colorFour","colorFive"]}),Object(u.jsx)("div",{className:"points",children:this.state.points})]})}}]),n}(a.a.Component);n(16);var w=function(){return Object(u.jsx)(O,{})};s.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(w,{})}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.214f1782.chunk.js.map